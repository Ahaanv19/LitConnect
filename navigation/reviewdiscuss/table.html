---
layout: post
title: Genre Table
permalink: /tb
comments: true
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sections CRUD Operations</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>CRUD Operations for Sections</h1>
        
        <!-- Create Section Form -->
        <div class="form-container">
            <h2>Create Section</h2>
            <input type="text" id="create-name" placeholder="Section Name" required>
            <input type="text" id="create-theme" placeholder="Section Theme">
            <button onclick="createSection()">Create Section</button>
        </div>

        <!-- Update Section Form -->
        <div class="form-container">
            <h2>Update Section</h2>
            <input type="number" id="update-id" placeholder="Section ID" required>
            <input type="text" id="update-name" placeholder="New Section Name">
            <input type="text" id="update-theme" placeholder="New Section Theme">
            <button onclick="updateSection()">Update Section</button>
        </div>

        <!-- Delete Section Form -->
        <div class="form-container">
            <h2>Delete Section</h2>
            <input type="number" id="delete-id" placeholder="Section ID to Delete" required>
            <button onclick="deleteSection()">Delete Section</button>
        </div>

        <h2>Sections List</h2>
        <div id="sections-list">
            <!-- Sections will be displayed here -->
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        const apiUrl = 'https://litconnect.stu.nighthawkcodingsociety.com/api/sections';

        // Fetch and display sections
        function fetchSections() {
            $.get(apiUrl, function(sections) {
                $('#sections-list').empty();
                sections.forEach(section => {
                    $('#sections-list').append(`
                        <div>
                            <h3>${section.name}</h3>
                            <p>Theme: ${section.theme}</p>
                        </div>
                    `);
                });
            });
        }

        // Create Section
        function createSection() {
            const name = $('#create-name').val();
            const theme = $('#create-theme').val();

            if (!name) {
                alert('Section name is required!');
                return;
            }

            $.ajax({
                url: apiUrl,
                method: 'POST',
                contentType: 'application/json',
                data: JSON.stringify({ name, theme }),
                success: function() {
                    alert('Section created!');
                    fetchSections();  // Refresh sections list
                },
                error: function() {
                    alert('Error creating section!');
                }
            });
        }

        // Update Section
        function updateSection() {
            const id = $('#update-id').val();
            const name = $('#update-name').val();
            const theme = $('#update-theme').val();

            if (!id) {
                alert('Section ID is required!');
                return;
            }

            $.ajax({
                url: apiUrl,
                method: 'PUT',
                contentType: 'application/json',
                data: JSON.stringify({ id, name, theme }),
                success: function() {
                    alert('Section updated!');
                    fetchSections();  // Refresh sections list
                },
                error: function() {
                    alert('Error updating section!');
                }
            });
        }

        // Delete Section
        function deleteSection() {
            const id = $('#delete-id').val();

            if (!id) {
                alert('Section ID is required!');
                return;
            }

            $.ajax({
                url: apiUrl,
                method: 'DELETE',
                contentType: 'application/json',
                data: JSON.stringify({ id }),
                success: function() {
                    alert('Section deleted!');
                    fetchSections();  // Refresh sections list
                },
                error: function() {
                    alert('Error deleting section!');
                }
            });
        }

        // Fetch sections when the page loads
        $(document).ready(function() {
            fetchSections();
        });
    </script>
</body>
</html>
