---
layout: post
title: Genre Table
permalink: /tb
comments: true
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sections CRUD Operations</title>
</head>
<body>
    <div class="container">
        <h1>CRUD Operations for Sections</h1>
        
        <!-- Create Section Form -->
        <div class="form-container">
            <h2>Create Section</h2>
            <input type="text" id="create-name" placeholder="Section Name" required>
            <input type="text" id="create-theme" placeholder="Section Theme">
            <button onclick="createSection()">Create Section</button>
        </div>

        <!-- Update Section Form -->
        <div class="form-container">
            <h2>Update Section</h2>
            <input type="number" id="update-id" placeholder="Section ID" required>
            <input type="text" id="update-name" placeholder="New Section Name">
            <input type="text" id="update-theme" placeholder="New Section Theme">
            <button onclick="updateSection()">Update Section</button>
        </div>

        <!-- Delete Section Form -->
        <div class="form-container">
            <h2>Delete Section</h2>
            <input type="number" id="delete-id" placeholder="Section ID to Delete" required>
            <button onclick="deleteSection()">Delete Section</button>
        </div>

        <h2>Sections List</h2>
        <div id="sections-list">
            <!-- Sections will be displayed here -->
        </div>
    </div>

    <script>
        const apiUrl = 'https://litconnect.stu.nighthawkcodingsociety.com/api/sections';

        // Fetch and display sections
        function fetchSections() {
            fetch(apiUrl)
                .then(response => response.json())
                .then(sections => {
                    document.getElementById('sections-list').innerHTML = '';
                    sections.forEach(section => {
                        document.getElementById('sections-list').innerHTML += `
                            <div>
                                <h3>${section.name}</h3>
                                <p>Theme: ${section.theme}</p>
                            </div>
                        `;
                    });
                })
                .catch(error => console.error('Error fetching sections:', error));
        }

        // Create Section
        function createSection() {
            const name = document.getElementById('create-name').value;
            const theme = document.getElementById('create-theme').value;

            if (!name) {
                alert('Section name is required!');
                return;
            }

            fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name, theme })
            })
            .then(response => response.json())
            .then(() => {
                alert('Section created!');
                fetchSections();
            })
            .catch(() => alert('Error creating section!'));
        }

        // Update Section
        function updateSection() {
            const id = document.getElementById('update-id').value;
            const name = document.getElementById('update-name').value;
            const theme = document.getElementById('update-theme').value;

            if (!id) {
                alert('Section ID is required!');
                return;
            }

            fetch(`${apiUrl}/${id}`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name, theme })
            })
            .then(response => response.json())
            .then(() => {
                alert('Section updated!');
                fetchSections();
            })
            .catch(() => alert('Error updating section!'));
        }

        // Delete Section
        function deleteSection() {
            const id = document.getElementById('delete-id').value;

            if (!id) {
                alert('Section ID is required!');
                return;
            }

            fetch(`${apiUrl}/${id}`, {
                method: 'DELETE',
                headers: { 'Content-Type': 'application/json' }
            })
            .then(response => response.json())
            .then(() => {
                alert('Section deleted!');
                fetchSections();
            })
            .catch(() => alert('Error deleting section!'));
        }

        // Fetch sections when the page loads
        document.addEventListener('DOMContentLoaded', fetchSections);
    </script>
</body>
</html>
